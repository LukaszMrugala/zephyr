{% extends 'base.html' %}

{% block title %} Test Report - {{ platform }} {% endblock %}

{% block sidebar %}
    <!-- Sidebar -->
        {% include "_platform-sidebar.html" %}
    <!-- End of Sidebar -->
{% endblock %}

{% block app_content %}
    {% include "_platform-summary-row.html" %}
    {% if tests_result.pass_rate != 100 %}
    <div class="card shadow mb-4 px-3">
        <div class="card-header py-3">
            <h4 class="m-0 font-weight-bold text-primary">List of fails test cases</h4>
        </div>
        <!-- Content Table Row -->
        <div class="card-body">
            {{ table_failures | safe }}

            <div class="alert alert-info alert-dismissible mt-2 fade show" role="alert">
                <strong>Info:</strong><ul>
                    <li>[ts] - test suite</li>
                    <li>[tc] - test case</li>
                </ul>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </div>
    {% endif %}
    <div class="card shadow mb-4 px-3">
        <div class="card-header py-3">
            <h5 class="m-0 font-weight-bold text-primary">Source files for {{platform}}</h5>
        </div>
        <div class="card-body">
            <ul class="list-group">
                {%for item in platforms[platform] %}
                <li class="list-group-item">
                    <i class="fas fa-fw fa-cog"></i>
                    <a href='{{ url_for(".download_logs", branch=branch, run_date=run_date_time, artifact=item.split("/")[-1], platform=platform, filename="twister.log") }}'>twister.log ({{ item.split("/")[-1] }})</a>
                </li>
                <li class="list-group-item">
                    <i class="fas fa-fw fa-cog"></i>
                    <a href='{{ url_for(".download_logs", branch=branch, run_date=run_date_time, artifact=item.split("/")[-1], platform=platform, filename="twister.json") }}'>twister.json ({{ item.split("/")[-1] }})</a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}

{% block date_runs_menu %}
    {% for item in date_runs %}
        <a class="dropdown-item run_date" href="?run-date={{ item }}&p={{ platform }}" data-target="{{ item }}">{{ item }}</a>
    {% endfor %}
{% endblock %}

{% block scripts %}
    {{ super() }}

    <script>
        localStorage.setItem("platform", "{{platform}}");
    </script>

    <!-- Page level custom scripts -->
    <script src="{{ url_for('static', filename='js/datatables-failures.js') }}"></script>
{% endblock %}
